<template>
<div>
    <com-header></com-header>
    <div class="container" id="busDetails">
        <div class="bus_introduction clearfix">
            <com-pic :imgs='imgs'></com-pic>
            <div class="right_introduction">
                <div class="top">
                    <h2>
                        {{mediaInfo.name}}
                        <i class="icon icon-vip" v-if="mediaInfo.isVip"></i>
                        <i class="icon icon-yes" v-if="mediaInfo.isYes"></i>
                    </h2>
                    <div class="price">
                        起拍价
                        <span>￥{{mediaInfo.price}}</span>
                    </div>
                    <div class="address clearfix">
                        <label class="fl">地址：{{mediaInfo.address}}</label>
                        <div class="map fl" @click="openMap">
                            <i class="icon logo_position"></i>查看地图
                        </div>
                    </div>
                    <div class="tags">
                        <ul>
                            <li v-for="tag in mediaInfo.tags" :key="tag">
                                {{tag}}
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="bottom">
                    <div class="clearfix">
                        <label class="fl">媒体评定分：</label>
                        <div class="media_rating fl">
                            <ul class="star1">
                                <li v-for="n in 5" v-bind:key="n"></li>
                            </ul>
                             <ul class="star2">
                                <li v-for="n in mediaInfo.star" v-bind:key="n" class="red"></li>
                            </ul> 
                        </div>
                    </div>
                    <div class="clearfix">
                        <label class="fl">媒体评定语：</label>
                        <div class="media_comment fl">
                            {{mediaInfo.comment}}
                            <a :href="mediaInfo.comment_url" class="comment_url">[查看详情]</a>
                        </div>
                    </div>
                    <div class="code">
                        <a v-on:click="erweima" href="javascript:void(0)">
                            咨询豫姐
                        </a>
                        <img class="erweima" :src="mediaInfo.erwei_img" v-show="isErwei">
                    </div>
                </div>
            </div>
        </div>
        <div class="nav">
            <ul>
                <li v-for="(item,index) in busDetList" v-bind:key="index">
                   <a :href="'#nav-'+index">{{item.nav}}</a>
                </li>
            </ul>
        </div>
        <!-- case官方案例开始 -->
        <div class="case">
             <img class="tit" :src="caseInfo.nav_img"> 
            <div class="more clearfix">
                <!--应该是<router-link>吧，先放着，等大佬回来  -->
                <a href="javascript:void(0)" class="more_a fr">更多 ></a>
            </div>
            <div class="list">
                <ul>
                    <li v-for="item in caseInfo.details" v-bind:key="">
                        <img v-lazy="item.src">
                        <h3>{{item.case_name}}</h3>
                        <div class="tags">
                            <ul>
                                <li v-for="tag in item.tags" v-bind:key="">
                                    {{tag.tag}}
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!-- case官方案例结束 -->
        <!-- 精选套餐开始 -->
        <div class="package">
            <img class="tit" :src="packageInfo.nav_img"> 
            <div class="more clearfix">
                <!--应该是<router-link>吧，先放着，等大佬回来  -->
                <a href="javascript:void(0)" class="more_a fr">更多 ></a>
            </div>
            <div class="list">
                <ul>
                    <li v-for="item in packageInfo.details" v-bind:key="">
                        <img v-lazy="item.src">
                        <div class="top clearfix">
                            <div class="price fl">￥{{item.price}}</div>
                            <div class="tags fr">
                                <ul>
                                    <li v-for="tag in item.tags" v-bind:key="">
                                        {{tag.tag}}
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <h3>{{item.package_name}}</h3>
                    </li>
                </ul>
            </div>
        </div>
        <!-- 精选套餐结束 -->
        <!-- 摄影团队开始  -->
        <div class="photographer">
            <img class="tit" :src="photographer.nav_img">
            <div class="arrows">
                <a class="prev arrow" href="javascrript:void(0)"></a>
                <a class="next arrow" href="javascrript:void(0)"></a>
            </div>
            <div class="list">
                <ul>
                    <li v-for="item in photographer.details" v-bind:key="">
                        <img v-lazy="item.src">
                        <div class="top clearfix">
                            <div class="name fl">{{item.name}}</div>
                            <div class="years fr">
                                <ul>
                                    <li>
                                        {{item.years}}年
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="special">
                            拍摄特点：{{item.special}}
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!-- 摄影团队结束  -->
        <!-- 化妆团队开始 -->
        <div class="dresser">
            <img class="tit" :src="dresser.nav_img">
            <div class="arrows">
                <a class="prev arrow" href="javascrript:void(0)"></a>
                <a class="next arrow" href="javascrript:void(0)"></a>
            </div>
            <div class="list">
                <ul>
                    <li v-for="item in dresser.details" v-bind:key="">
                        <img v-lazy="item.src">
                        <div class="top clearfix">
                            <div class="name fl">{{item.name}}</div>
                            <div class="years fr">
                                <ul>
                                    <li>
                                        {{item.years}}年
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="special">
                            拍摄特点：{{item.special}}
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!-- 化妆团队结束 -->
        <!-- 商家简介开始 -->
        <div class="business">
            <img class="tit" :src="introInfo.nav_img">
            <div class="cont clearfix">
                <div class="left fl">
                    <div class="top clearfix">
                        <img v-lazy="introInfo.logo" class="fl">
                        <div class="fl">
                            <span>商家简介</span>
                            <span class="name">{{introInfo.bus_name}}</span>
                        </div>
                    </div>
                    <div class="bottom" v-html="introInfo.brief">
                    </div>
                </div>
                <div class="right fr">
                    <div class="star_time item">
                        <label>开业时间：</label>
                        <span>{{introInfo.star_time}}</span>
                    </div>
                    <div class="bus_time item">
                        <label>营业时间：</label>
                        <span>{{introInfo.bus_time}}</span>
                    </div>
                    <div class="payment item">
                        <label>付款方式：</label>
                        <span>{{introInfo.payment}}</span>
                    </div>
                    <div class="feature clearfix item">
                        <label class="fl">服务特色：</label>
                        <span class="fl">
                            <ul>
                                <li v-for="item in introInfo.features">{{item}}</li>
                            </ul>
                        </span>
                    </div>
                </div>
            </div>
            <div class="environment">
                <div class="subtit">门店环境</div>
                <ul class="clearfix">
                    <li v-for="item in introInfo.environment" class="fl">
                        <img v-lazy="item.src">
                    </li>
                </ul>
                <div class="arrows">
                    <a class="prev arrow" href="javascrript:void(0)"></a>
                    <a class="next arrow" href="javascrript:void(0)"></a>
                </div>
            </div>
        </div>
        <!-- 商家简介结束 -->
    </div>
    </div>
</template>

<script>
import { mapGetters, mapActions } from 'vuex'
import header from './../components/headerDetails'
import bigImg from './../components/bigImg'
export default {
    components: {
        comHeader: header,
        comPic:bigImg
    },
    data() {
        return {
            busName:this.$route.query.busName,
            isErwei:false,
            imgs:[],
            mediaInfo:"",
            introInfo:"",
            caseInfo:"",
            packageInfo:"",
            photographer:"",
            dresser:""
        }
    },
    computed: {
        ...mapGetters({
            busInfo:'busInfo',
            busDetList:'busDetList'
        }),
        ...mapActions({
            qryBusDetails:'qryBusDetails'
        })
    },
    mounted() {
        let data = {
            bus_id:'1asd12a1q111'
        }
        this.$store.dispatch('qryBusDetails', data)
    },
    methods: {
        erweima () {
            this.isErwei = !this.isErwei;
        },
        openMap(){
        }
    },
    watch:{
        busInfo(){
            this.imgs = this.busInfo.media_info.img;
            this.mediaInfo = this.busInfo.media_info;
            this.introInfo = this.busInfo.intro_info;
        },
        busDetList(){
            this.caseInfo = this.busDetList[0];
            this.packageInfo = this.busDetList[1];
            this.photographer = this.busDetList[2];
            this.dresser = this.busDetList[3];
        }
    },
    beforeDestroy() {
    }
}
</script>

<style rel="stylesheet/scss" lang="scss">
@import "./../assets/css/busDetails.scss";
</style>

